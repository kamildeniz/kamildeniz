name: Metrics (Languages %)

on:
  workflow_dispatch:
  schedule:
    - cron: "0 6 * * *"   # daily (UTC) ~ TR 09:00

permissions:
  contents: write

jobs:
  metrics:
    runs-on: ubuntu-latest
    steps:
      - name: Generate languages metrics
        uses: lowlighter/metrics@latest
      with:
  token: ${{ secrets.METRICS_TOKEN }}
  committer_token: ${{ secrets.METRICS_TOKEN }}
  filename: metrics.languages.svg
  base: ""
  template: classic

  plugin_languages: yes
  plugin_languages_sections: most-used
  plugin_languages_limit: 12
  plugin_languages_indepth: yes
  plugin_languages_details: percentage, bytes-size

  # ✅ Tüm repoları dahil et
  repositories_affiliations: owner

  # ✅ Profile repo'yu hariç tut (README dosyaları oranı bozmasın)
  plugin_languages_ignored_repos: kamildeniz

